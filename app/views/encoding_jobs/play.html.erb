    <div class="row">
        <div class="dash-video-player col-md-9">
            <video controls="true"></video>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-heading panel-top">
                    <span class="panel-title">ABR</span>
                    <div class="btn-group">
                        <button
                            type="button"
                            class="btn btn-default"
                            ng-class="{active:abrEnabled == false}"
                            ng-click="setAbrEnabled(false)">
                            <span>Off</span>
                        </button>
                        <button
                            type="button"
                            class="btn btn-default active"
                            ng-class="{active:abrEnabled == true}"
                            ng-click="setAbrEnabled(true)">
                            <span>On</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading panel-top">
                    <span class="panel-title">Video</span>
                    <div class="btn-group">
                        <button
                            type="button"
                            class="btn btn-default"
                            ng-click="abrDown('video')">
                            <span class="glyphicon glyphicon-minus"></span>
                        </button>
                        <button
                            type="button"
                            class="btn btn-default"
                            ng-click="abrUp('video')">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                </div>
                <div class="panel-body panel-stats">
                    <p class="text-warning">{{videoBitrate}} kbps</p>
                    <p class="text-primary">Rep Index: <span class="text-success">{{videoIndex}}</span><span class="text-warning">{{videoPendingIndex}}</span>/<span class="text-success">{{videoMaxIndex}}</span></p>
                    <p class="text-primary">Buffer Length: <span class="text-success">{{videoBufferLength}}</span></p>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading panel-top">
                    <span class="panel-title">Audio</span>
                    <div class="btn-group">
                        <button
                            type="button"
                            class="btn btn-default"
                            ng-click="abrDown('audio')">
                            <span class="glyphicon glyphicon-minus"></span>
                        </button>
                        <button
                            type="button"
                            class="btn btn-default"
                            ng-click="abrUp('audio')">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                </div>
                <div class="panel-body panel-stats">
                    <p class="text-warning">{{audioBitrate}} kbps</p>
                    <p class="text-primary">Rep Index: <span class="text-success">{{audioIndex}}</span><span class="text-warning">{{audioPendingIndex}}</span>/<span class="text-success">{{audioMaxIndex}}</span></p>
                    <p class="text-primary">Buffer Length: <span class="text-success">{{audioBufferLength}}</span></p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Encoding Job settings</h3>
        </div>
        <div class="panel-body">
          <b>Variant Jobs:</b><br>
          <ul>
            <% @encoding_job.variant_jobs.each do |v| %>
            <li><%= v.encoder_flags %></li>
            <% end %>
          </ul>
          
          <b>MP4Box DASH settings:</b><br>
          <ul>
            <li><%= @encoding_job.post_processing_flags %></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row">
        <div class="panel panel-default">
            <div class="panel-heading panel-top">
                <span class="panel-title">Charts</span>
                <div class="btn-group">
                    <button
                        type="button"
                        class="btn btn-default"
                        ng-class="{active:showCharts == false}"
                        ng-click="setCharts(false)">
                        Hide
                    </button>
                    <button
                        type="button"
                        class="btn btn-default"
                        ng-class="{active:showCharts == true}"
                        ng-click="setCharts(true)">
                        Show
                    </button>
                </div>
            </div>
            <div ng-switch on="showCharts">
                <div class="panel-body panel-stats" ng-switch-when="true">
                    <chart ng-model="bufferData"></chart>
                </div>
            </div>
        </div>
    </div>

<%= javascript_tag do %>
$(window).on('load', function(e) {
  var scope = angular.element('body').scope();
  scope.setStream({url: '<%= mpd_url @encoding_job %>'});
  scope.doLoad();
})
<% end %>
